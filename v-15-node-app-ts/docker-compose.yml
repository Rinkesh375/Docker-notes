# ------------------------------------------------------------
# üê≥ Docker Compose Configuration for E-Commerce Project
# ------------------------------------------------------------
# This file defines two services:
# 1Ô∏è‚É£ PostgreSQL - Database Service
# 2Ô∏è‚É£ Redis      - Caching Service
# ------------------------------------------------------------

name: e-commerce   # Optional: sets a project name for Docker Compose

services:
  # ----------------------------------------------------------
  # üß© PostgreSQL Database Service
  # ----------------------------------------------------------
  db:
    image: postgres:16             # Use the official Postgres 16 image
    container_name: postgres       # Assign a custom name to the container
    environment:                   # Environment variables for database setup
      POSTGRES_USER: postgres      # Database username
      POSTGRES_PASSWORD: postgres  # Database password
      POSTGRES_DB: postgres        # Default database name
    ports:
      - "5431:5432"                # Map local port 5431 ‚Üí container port 5432

  # ----------------------------------------------------------
  # ‚ö° Redis Caching Service
  # ----------------------------------------------------------
  redis:
    image: redis:7-alpine          # Lightweight Redis image (version 7)
    container_name: redis          # Name of the Redis container

    depends_on:                    # Ensures Redis starts after 'db' service
      - db                         # Redis depends on PostgreSQL to start first first db should be started then this redis

    ports:
      - "6379:6379"                # Map local port 6379 ‚Üí container port 6379

# ------------------------------------------------------------
# üí° Equivalent docker run commands (for reference)
# ------------------------------------------------------------
# PostgreSQL:
# docker run -d --name postgres \
#   -e POSTGRES_USER=postgres \
#   -e POSTGRES_PASSWORD=postgres \
#   -e POSTGRES_DB=postgres \
#   -p 5431:5432 postgres:16
#
# Redis (starts after DB in Compose):
# docker run -d --name redis \
#   -p 6379:6379 redis:7-alpine
# ------------------------------------------------------------


